<Window x:Class="Wa3Tuner.MainWindow" Name="App_window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"   
        Background="LightGray"
        Loaded="loaded"
        KeyDown="Hotkeys"
       
        WindowStartupLocation="CenterScreen"
        Closing="Window_Closing"
        Title="War3 Model Tuner" Height="500" Width="550">
    <Window.Resources>
       
        <!-- Define the style for ListBoxItem -->
        <Style TargetType="ListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>

            <Style.Triggers>
                <!-- Selected state when ListBox is focused -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="DodgerBlue"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
                <!-- Selected state when ListBox is unfocused -->
                <MultiTrigger>
                    <MultiTrigger.Conditions>
                        <Condition Property="IsSelected" Value="True"/>
                        <Condition Property="IsKeyboardFocusWithin" Value="False"/>
                    </MultiTrigger.Conditions>
                    <Setter Property="Background" Value="SlateBlue"/>
                    <Setter Property="Foreground" Value="Blue"/>
                </MultiTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="20"/>
            <RowDefinition/>


        </Grid.RowDefinitions>
        <Menu Grid.Row="0"     Background="LightGray" Grid.ColumnSpan="2" Height="20">
            <MenuItem Header="Model">
                <MenuItem Header="Load" Click="load" InputGestureText="Ctrl+O"></MenuItem>
                <MenuItem Header="Reload" Click="reload"  InputGestureText="Ctrl+R"></MenuItem>
                <MenuItem Name="ButtonSave" Header="Save" Click="save"   InputGestureText="Ctrl+S"></MenuItem>
                <MenuItem Name="ButtonSaveAs" Header="Save as..." Click="saveas"  InputGestureText="Alt+S"></MenuItem>
                <MenuItem Name="ButtonOpenModelFolder" Header="Open containing folder" Click="opentargetfolder"  ></MenuItem>
                <MenuItem Header="Cameras"  Click="cameras"  />
                <MenuItem Header="Set model name"  Click="setModelName"/>

            </MenuItem>


            <MenuItem Header="Recents" Name="Item_Recents"/>
            <MenuItem Header="UI">

                <MenuItem Header="Refresh all lists"  Click="refreshalllists" InputGestureText="Ctrl+F"/>
                <MenuItem Header="Make a screenshot"  Click="scr"/>
                <MenuItem Header="Make a screenshot of the model"  Click="scr2"/>

            </MenuItem>
            <MenuItem Header="Render">
                <MenuItem Name="Menuitem_Textured" IsCheckable="True" IsChecked="True" Header="Textured"
                          Checked="ToggleTextures" Unchecked="ToggleTextures"
                          InputGestureText="Ctrl+T"/>
            </MenuItem>
            <MenuItem  Background="LightGray" Header="Import">

                <MenuItem Click="ImportAllGeosetsOf" Header="Import all geosets of..." ></MenuItem>
                <MenuItem Click="ImportAllNodesOf" Header="Import all nodes of.."></MenuItem>
                <MenuItem Click="ImportTextures" Header="Import all textures of..."></MenuItem>
                <MenuItem Click="ImportSequences" Header="Overwrite the list of sequences with another model's..."></MenuItem>

            </MenuItem>
            <MenuItem Header="Cleaner">
                <MenuItem Header="Remove all lights" Click="RemoveAllLights" />
                <MenuItem Header="Remove all emitter 1s" Click="RemoveEmitters1" />
                <MenuItem Header="Remove all emitter 2s" Click="RemoveEmitters2" />
                <MenuItem Header="Remove all attachments" Click="RemoveAllAttachments" />
                <MenuItem Header="Remove all collision shapes" Click="RemoAllCOLS" />
                <MenuItem Header="Remove all helpers" Click="removeAllHelpers" />
                <MenuItem Header="Remove all event objects" Click="RemoveAllEventObjects" />
                <MenuItem Header="Remove all nodes" Click="removeAllNodes" />
                <MenuItem Header="Remove all geosets" Click="delgeosets" />

                <MenuItem Header="Remove all texture animations" Click="deltxa" />
                <MenuItem Header="Remove all cameras" Click="delcameras" />
                <MenuItem Header="Remove all sequences" Click="delsequences" />
                <MenuItem Header="Remove all global sequences" Click="delgss" />
                <MenuItem Click="DelAllGeosets" Header="Remove all geosets"/>
                <MenuItem Header="Remove all node animations" Click="RemoveAllAnimations" />
            </MenuItem>
            <MenuItem Name="MenuTeamColor" Header="Team Color">

            </MenuItem>
            <MenuItem Header="UV Mapper" Click="showuv"  Visibility="Collapsed"/>
            <MenuItem Header="Help">
                <MenuItem Header="How a model works?"  Click="explain"/>
                <MenuItem Header="How values work in this app?"  Click="explain2"/>
                <MenuItem Header="About"  Click="about"/>
            </MenuItem>



        </Menu>
        <Viewport3D Name="Viewport_Main" Grid.Row="1" Grid.Column="0" Visibility="Collapsed" >


        </Viewport3D>
        <TabControl Name="ListOptions" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" 
                    SelectionChanged="showinfo" >



            <TabItem Header="Optimize"  Grid.Row="2" Grid.RowSpan="2"  Background="LightGray">
                <Grid>
                    <Grid.ColumnDefinitions>

                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="70"/>
                        <RowDefinition/>
                        <RowDefinition Height="70"/>

                    </Grid.RowDefinitions>
                    <StackPanel Name="Stack_Optimize"  Background="LightGray"    >
                        <Button Cursor="Hand"   Click="checkallopts">Check all</Button>
                        <Button Cursor="Hand"  Click="uncheckallopts">Uncheck all</Button>
                        <Button Cursor="Hand"  Click="inversecheckopts">Inverse Check</Button>
                    </StackPanel>
                    <ScrollViewer Grid.Row="1" Grid.ColumnSpan="2">

                        <StackPanel Name="ListOptOptions" Background="LightGray">

                            <CheckBox IsChecked="True" IsEnabled="False" >Re-arrange inconsistent sequences</CheckBox>
                            <CheckBox  IsChecked="True" IsEnabled="False"  >Re-arrange inconsistent keyframes</CheckBox>

                            <CheckBox IsChecked="True" IsEnabled="False">add missing pivot points</CheckBox>
                            <CheckBox IsChecked="True" IsEnabled="False">Fix invalid node relationships</CheckBox>
                            <CheckBox IsChecked="True" IsEnabled="False">Remove empty geosets</CheckBox>
                             
                            <CheckBox IsChecked="True" IsEnabled="False">Give/create missing components to components without</CheckBox>
                            <CheckBox IsChecked="true" IsEnabled="False">Remove invalid geoset animations</CheckBox>
                            <CheckBox IsChecked="true" IsEnabled="False">Make dynamic transformations with one/no keyframes static</CheckBox>
                            <CheckBox IsChecked="true" IsEnabled="False">Remove invalid geoset animations</CheckBox>



                            <CheckBox Name="Check_Linearize">Linearize animations</CheckBox>
                            <CheckBox Name="Check_delEmptyEO">Delete empty event objects</CheckBox>
                            <CheckBox Name="check_delISolatedTriangles">Delete isolated triangles</CheckBox>
                            <CheckBox Name="check_delISolatedVertices">Delete isolated vertices</CheckBox>
                            <CheckBox Name="check_noArea">Delete triangles with no area</CheckBox>
                            <CheckBox Name="check_delOverlapping1"   >Delete fully overlapping triangles who share the same vertices</CheckBox>
                            <CheckBox Name="check_delOverlapping2"  >Delete fully overlapping triangles who share different vertices</CheckBox>
                            <CheckBox Name="check_mergevertices"   >Merge vertices with identical positions and texture positions</CheckBox>
                            <CheckBox Name="check_mergeTextures"   >Merge identical textures</CheckBox>
                            <CheckBox Name="check_mergeMaterials"   >Merge identical materials</CheckBox>
                            <CheckBox Name="check_mergeLayers"   >delete duplicate layers</CheckBox>
                            <CheckBox Name="check_mergeTAs"   >Merge identical texture animations</CheckBox>


                            <CheckBox Name="Check_Delete0LengthSequences">Delete 0-length sequences</CheckBox>
                            <CheckBox Name="Check_Delete0LengthGSequences">Delete 0-length global sequences</CheckBox>
                            <CheckBox Name="Check_DeleteUnanimatedSequences">Delete un-animated sequences</CheckBox>
                            <CheckBox Name="Check_delunusedgs">Delete unused global sequencs</CheckBox>
                            <CheckBox Name="Check_ConvertBones">Remove bones with no attached vertices to it, and no children</CheckBox>
                            <CheckBox Name="Check_DeleteUnusedHelpers">Delete childless helpers</CheckBox>

                            <CheckBox Name="Check_DeleteUnusedMaterials">Delete unused materials</CheckBox>
                            <CheckBox Name="Check_DeleteUnusedTextures">Delete unused textures</CheckBox>
                            <CheckBox Name="Check_DeleteUnusedTextureAnimations">Delete unused texture animations</CheckBox>
                            <CheckBox Name="Check_DeleteUnusedKeyframes">Delete unused keyframes</CheckBox>
                            <CheckBox Name="Check_DeleteIdenticalAdjascentKEyframes">Delete identical adjascent keyframes</CheckBox>
                            <CheckBox Name="Check_DeleteIdenticalAdjascentKEyframes_times">Delete identical adjascent keyframes's times</CheckBox>
                            <CheckBox Name="Check_DeleteSimilarSimilarKEyframes" IsEnabled="False" >Delete similar adjascent keyframes</CheckBox>
                            <CheckBox Name="Check_MissingKeyframes">Add missing opening keyframes</CheckBox>
                            <CheckBox Name="Check_MergeGeosets">Merge geosets that use the same materials</CheckBox>
                            <CheckBox Name="Check_DeleteUnusedMatrixGroups">Delete unused matrix groups</CheckBox>
                            <CheckBox Name="Check_Minimiematrixgroups" ToolTip="If two or more matrix groups contain the same nodes regardless of order, they will be merged">Minimize repeating matrix groups</CheckBox>
                            <CheckBox Name="Check_CalculateExtents">Recalculate extents</CheckBox>

                            <CheckBox Name="Check_ClampKeyframes">clamp all keyframes</CheckBox>
                            <CheckBox Name="Check_ClampUVs">clamp all uv coordinates</CheckBox>
                            <CheckBox Name="Check_ClampLights">clamp all light attentuations</CheckBox>
                            <CheckBox Name="Check_ClampNormals">clamp invalid normals</CheckBox>
                            <CheckBox Name="Check_AddMissingOrigin">add origin ref if missing</CheckBox>

                            <CheckBox Name="Check_DeleteDuplciateGAs">delete duplicate geoset animations</CheckBox>
                            <CheckBox Name="Check_DeleteDuplciateGeosets">delete duplicate geosets</CheckBox>
                            <CheckBox Name="Check_AddMissingGeosetAnims">add missing geoset animations</CheckBox>
                            <CheckBox Name="Check_SetAllStaticGAs">set all alpha static geoset animations to 1</CheckBox>
                            <CheckBox Name="Check_AddMissingVisibilities">add missing visibilities to all geoset animations and nodes</CheckBox>
                            <CheckBox Name="Check_DetachFromNonBone">detach vertices from non-bone nodes and if empy, reattach to dummy bone</CheckBox>



                            <CheckBox Name="Check_VisInterp">set interpolation of visibilities to none</CheckBox>

                        </StackPanel>
                    </ScrollViewer>
                    <Button Cursor="Hand"  Click="optimize" Grid.Row="2" Grid.ColumnSpan="2" Background="#FFDDDDDD"  >Optimize
                    </Button>
                </Grid>


            </TabItem>
            <TabItem Header="Geosets"  Background="LightGray"  >
                <Grid   Background="LightGray"  >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition  MinWidth="200" MaxWidth="450"/>


                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20"  />
                        <RowDefinition Height="*"  />
                        <RowDefinition Height="25"  />
                        <RowDefinition Height="*"/>

                    </Grid.RowDefinitions>

                    <Viewport3D    Name="Scene_Viewport" Grid.Column="0" Grid.RowSpan="4"    />
                    <Canvas Name="SceneOVerlay"  Grid.Column="0" Grid.RowSpan="4" MouseWheel="Scene_MouseWheel"  
         MouseMove="RotateMoved"   MouseDown="RotateOn"   MouseUp="RotateOff"  Background="Transparent">

                    </Canvas>
                    <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0"/>
                    <StackPanel Orientation="Horizontal"  Grid.Row="0" Grid.Column="1">


                        <TextBlock Name="Report_Geosets" Margin="5,0,5,0" Text="Geosets" FontWeight="Bold"  Grid.Column="1" Grid.Row="0"/>
                        <StackPanel Orientation="Horizontal"   Grid.Column="1"  Grid.Row="0">
                            <Button Cursor="Hand"   Name="ButtonGeosetOptions" Click="showgm" Content="..." Width="30" FontWeight="Bold"  VerticalContentAlignment="Top" BorderBrush="LightGray" >
                                <Button.ContextMenu>
                                    <ContextMenu>
                                      
                                        <MenuItem Header="Edit visibilities" Click="editvisibilitiesofgeoset" />
                                        <MenuItem Header="Change used material" Click="changegeosetusedmaterial" />
                                        <MenuItem Header="Go to material" Click="gotogeosettexture" />
                                        <MenuItem Header="Go to bone" Click="gotogeosetbone" />

                                        <MenuItem Header="Normals">
                                            <MenuItem Header="Average normals" Click="AverageNormals" />
                                            <MenuItem Header="Negate normals" Click="negatenormals" />

                                        </MenuItem>
                                        <MenuItem Header="Geoset Operations">

                                            <MenuItem Header="Center
                           ">
                                                <MenuItem Header="Center..." Click="Centergeosets" />
                                                <MenuItem Header="Center at..." Click="Centergeosetsat" />
                                            </MenuItem>
                                            <MenuItem Header="Flatten...">
                                                <MenuItem Header="Flatten..." Click="flattengeosets" />
                                                <MenuItem Header="Flatten side..." Click="flattengeosetsside" />
                                            </MenuItem>
                                            <MenuItem Header="Put on ground..." Click="putonground_click" />
                                            <MenuItem Header="Translate..." Click="TranslateGeoserts" />
                                            <MenuItem Header="Rotate..." Click="RotateGeosets" />
                                            <MenuItem Header="Scale each..." Click="scalegeosets" />
                                            <MenuItem Header="Negate..." Click="negate" />
                                            <MenuItem Header="Merge" ToolTip="All selected geosets will be merged into one and use the first's material" Click="MergeGeosets" />
                                            <MenuItem Header="Separate" ToolTip="if a geoset contains 2 or more meshes, split them into different gesets" Click="separate" />
                                            <MenuItem Header="Pull together..." Click="PullTogether" />
                                            <MenuItem Header="Subdivide" ToolTip="Splits each triangle into 3 triangles. Preserves texture coordinates." Click="subdivide" />
                                            <MenuItem Header="Simplify" ToolTip="For each flat surface found inside the selected geoset, reduces it to the minimum required triangles to form it" Click="Simplify" />
                                            <MenuItem Header="Duplicate" Click="DuplicateGeoset" />
                                            <MenuItem Header="Align..." Click="aligngeosets" />
                                            <MenuItem Header="Scale to fit..." Click="scaleToFit" />
                                            <MenuItem Header="Create collision shape for this geoset" Click="createColsForTargetGeo" />

                                            <MenuItem Header="Fragment into geosets" ToolTip="Splits a geoset into multiple geosets, each holding a single of its triangles" Click="FragmentTrianglesIntoGeosets" />
                                            <MenuItem Header="Fragment inside geoset" ToolTip="Every triangle in the geoset will be detached" Click="FragmentTrianglesInGeoset" />
                                            <MenuItem Header="Fragment faces into geosets" ToolTip="Splits a geoset into multiple geosets, each holding a single of its faces/flat surfaces" Click="FragmentFacesIntoGeosets" />
                                            <MenuItem Header="Fragment faces in geoset" ToolTip="detaches each flat surface in the geoset" Click="FragmentFacesInGeoset" />
                                            <MenuItem Header="Weld all" ToolTip="Merges all vertices that overlap of each selected geoset" Click="WeldAll" />
                                        </MenuItem>
                                        <MenuItem Header="Attachment">
                                            <MenuItem Header="Reattach selected geoset/s to another bone..." Click="reattachToBone" />
                                            <MenuItem Header="Reattach all geoset to another bone..." Click="reattachallToBone" />

                                        </MenuItem>
                                        <MenuItem Header="Create">
                                            <MenuItem Header="Create Hero team glow (and bone)" Click="CreateHeroGlow" />
                                            <MenuItem Header="Create Team background (and bone)" Click="importtbg" />
                                          
                                            <MenuItem Header="Create Primitive shape...">
                                                <MenuItem Header="Cube" Click="createcube" />
                                                <MenuItem Header="Cylinder" Click="createcyllinder" />
                                                <MenuItem Header="Cone" Click="createcone" />
                                            </MenuItem>
                                            <MenuItem Header="Draw..." Click="drawshape" Visibility="Collapsed" />
                                            <MenuItem Header="Create extruded polygon..." Click="extrudedpolygon" Visibility="Collapsed" />
                                        </MenuItem>
                                        <MenuItem Header="UV">
                                            <MenuItem Header="Clamp All" Click="clampuvofgeoset"/>
                                            <MenuItem Header="Negate Us" Click="negateusofgeosets"/>
                                            <MenuItem Header="Negate Vs" Click="negavsofgeosets"/>
                                            <MenuItem Header="Swap Us and Vs" Click="swapusvsgeosets"/>
                                            <MenuItem Header="Fit" Click="fituvgeoet" ToolTip="If the geoset has 2 triangles, their textue coordintes will be fitted onto the texture"/>
                                        </MenuItem>
                                    </ContextMenu>
                                </Button.ContextMenu>
                            </Button>
                            <Button Cursor="Hand"  Content="All" Click="SelectAllGeosets" Width="30" ToolTip="Select all" />
                            <Button Cursor="Hand"  Content="None" Click="DeselectAllGeosets"  Width="35" ToolTip="Select none"/>
                            <Button Cursor="Hand"  Content="Invert" Click="InvertSelectGeosets"  Width="40" ToolTip="Invert select"/>
                            <Button Cursor="Hand"  Name="ButtonDelG" Content="Del" Click="delgeoset"  Width="30"   Grid.Row="0" />
                            
                        </StackPanel>
                   </StackPanel>
                    <ListBox Background="LightGray" Name="ListGeosets"  Grid.Column="1"
                             Grid.Row="1" SelectionMode="Multiple" SelectionChanged="SelectedGeosets" />

                    <ListBox  Background="LightGray"  Name="List_GeosetAnims" Grid.Row="3" Grid.Column="1"
                             SelectionMode="Single"    />




                    <StackPanel Orientation="Horizontal"  Grid.Row="2" Grid.Column="1" Background="LightGray">
                        <TextBlock Name="Label_GAs" Text="Geoset animations" FontWeight="Bold" Margin="0,0,5,0"/>
                        <Button Cursor="Hand"  Name="Buttongam" Click="showgam" Content="..." Width="30"  FontWeight="Bold"  
VerticalContentAlignment="Top" BorderBrush="LightGray">
                            <Button.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="view transformations" Click="ViewGaTransformatons" />
                                    <MenuItem Header="Make use/not use color" Click="MakeGAUseColor" />
                                    <MenuItem Header="Make all geoset animations alpha static" Click="MakeAllGAAlphaStatic" />
                                    <MenuItem Header="equalize the alpha animation data of all geoset animations" Click="equalizegas_alpha" />
                                    <MenuItem Header="equalize the color animation data of all geoset animations" Click="equalizegas_color" />
                                    <MenuItem Header="Make all geoset animations the same as this" Click="makegassameasga" />
                                    <MenuItem Header="Reset all geoset animations' alphas to static 1" Click="resetallgas" />
                                    <MenuItem Header="Create missing" Click="createmissinggas" />
                                    <MenuItem Header="Delete all" Click="delallgas" />
                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                        <Button Cursor="Hand"  Width="30" ToolTip="Edit Alphas" Click="ga_editalphas" >A</Button>
                        <Button Cursor="Hand"  Width="30" ToolTip="Edit Color"  Click="ga_editcolors" >C</Button>
                    </StackPanel>






                </Grid>

            </TabItem>

            <TabItem Header="Sequences"  Background="LightGray">
                <Grid Background="LightGray">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="203*"/>
                        <ColumnDefinition Width="69*"/>
                        <ColumnDefinition Width="272*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20"/>
                        <RowDefinition/>
                        <RowDefinition/>
                        <RowDefinition Height="80"/>

                    </Grid.RowDefinitions>
                    <TextBlock Name="Report_sequences" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"  />
                    <TextBlock Name="Report_gsequences" Grid.Row="0" Grid.Column="2" />
                    <ListBox Name="ListSequenes"    Background="LightGray"   SelectionMode="Single" 
                             Grid.Row="1" Grid.ColumnSpan="2"  SelectionChanged="SelectedSequence" ></ListBox>

                    <ListBox Name="ListGSequenes" SelectionChanged="SelectedGS"   Background="LightGray" Grid.Row="1" Grid.Column="2"  SelectionMode="Single" />

                    <ScrollViewer VerticalAlignment="Center" Grid.Column="0"   Grid.Row="2" Grid.ColumnSpan="2" >


                        <StackPanel  Background="LightGray" Height="1000">


                            <Button Cursor="Hand"  Click="newsequence_">New</Button>
                            <Button Cursor="Hand"  Click="CreatePresets">Create presets....</Button>
                            <Button Cursor="Hand"  Click="renamesequence">Rename</Button>
                            <Button Cursor="Hand"  Click="swapnames">Swap names with...</Button>
                            <Button Cursor="Hand"  Click="DuplicateSEquenceWithMAtchingkeyframes">Duplicate (with matching keyframes)</Button>

                            <Button Cursor="Hand"  Click="resizeSequence">Resize... (along with keyframes)</Button>
                            <Button Cursor="Hand"  Click="delseqalong">Delete (along with all keyframes)</Button>


                            <Button Cursor="Hand"  Click="reportwbaaits">Which bones are animated in this sequence?</Button>
                            <Button Cursor="Hand"  Click="switchLooping">Make looping/Nonlooping</Button>
                            <Button Cursor="Hand"  Click="ClearSequenceAnimations">Clear animations</Button>
                            <Button Cursor="Hand"  Click="reverseSequence">Reverse sequence</Button>
                            <Button>Reverse all sequences</Button>
                            <Button Cursor="Hand"  Click="masscreeatesequences">Mass create sequences...</Button>

                            <Button Cursor="Hand"  Click="clearsequencetranslations">Clear translations</Button>
                            <Button Cursor="Hand"  Click="clearsequencescalings">Clear scalings</Button>
                            <Button Cursor="Hand"  Click="clearsequencerotations">Clear rotations</Button>
                            <Button Cursor="Hand"  Click="ClearAllAnimationsOfSequence">Clear all animations</Button>
                            <Button Cursor="Hand"  Click="MergeSelectedSequences">Merge</Button>
                            <Button Cursor="Hand"  Click="SplitSequences">Split</Button>
                            <Button Cursor="Hand"  Click="syncwhith"   ToolTip="For each component's transformation, if that transformation's keyframes count is equal to the second sequence, sync their times">Sync with...</Button>


                        </StackPanel>

                    </ScrollViewer>
                    <StackPanel Grid.Row="1" Grid.Column="2" Margin="0,208,0,0" Grid.RowSpan="2">
                        <TextBox Name="InputGSDuration"></TextBox>
                        <Button Cursor="Hand"  Click="addgs">Add</Button>
                        <Button Cursor="Hand"  Click="editgs">Edit</Button>
                        <Button Cursor="Hand"  Click="delgs">Remove</Button>
                    </StackPanel>
                    <TextBox Name="Report_Sequence_UsedNodes" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="3" IsReadOnly="True"  AcceptsReturn="True" 
    AcceptsTab="True" 
    TextWrapping="Wrap" 
    VerticalScrollBarVisibility="Auto"
    HorizontalScrollBarVisibility="Disabled" />
                    <TextBox Name="Report_GSequence_UsedNodes" Grid.Column="2"  Grid.Row="3" IsReadOnly="True"  AcceptsReturn="True" 
    AcceptsTab="True" 
    TextWrapping="Wrap" 
    VerticalScrollBarVisibility="Auto"
    HorizontalScrollBarVisibility="Disabled" />
                </Grid>
            </TabItem>
            <TabItem Header="Nodes"  Background="LightGray">




                <Grid  Background="LightGray">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20"/>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <TextBlock Name="Report_Nodes" Height="20"/>
                    <TextBlock Name="header_nodedata" Text="Node properties and data" Height="20" Grid.Row="0" Grid.Column="1"/>
                    <TreeView Name="ListNodes" Grid.Column="0" Grid.Row="1" MouseDoubleClick="EditNodeData" Grid.RowSpan="2"
                             Background="LightGray"         SelectedItemChanged="ListNodes_SelectedItemChanged"/>
                    <StackPanel Name="NodeDataEditor" Grid.Column="1" Grid.Row="1">
                        <StackPanel Orientation="Horizontal">
                            <StackPanel Margin="2">
                                <CheckBox Content="Billboarded" Name="Check_Billlboarded"  Checked="Checked_Billlboarded" Unchecked="Checked_Billlboarded"/>
                                <CheckBox Content="Billboarded X" Name="Check_Billlboardedx" Checked="Checked_Billlboardedx" Unchecked="Checked_Billlboardedx"/>
                                <CheckBox Content="Billboarded Y" Name="Check_Billlboardedy" Checked="Checked_Billlboardedy" Unchecked="Checked_Billlboardedy"/>
                                <CheckBox Content="Billboarded Z" Name="Check_Billlboardedz" Checked="Checked_Billlboardedy" Unchecked="Checked_Billlboardedz"/>
                            </StackPanel>
                            <StackPanel Margin="2">
                                <CheckBox Content="Camera Anchored" Name="Check_cameraAnchored" Checked="Checked_cameraAnchored" Unchecked="Checked_cameraAnchored"/>
                                <CheckBox Content="Dont inherit translation" Name="Check_dontInhTranslation" Checked="Checked_dontInhTranslation" Unchecked="Checked_dontInhTranslation"/>
                                <CheckBox Content="Dont inherit rotation" Name="Check_dontInhRotation" Checked="Checked_dontInhRotation" Unchecked="Checked_dontInhRotation"/>
                                <CheckBox Content="Dont inherit scaling" Name="Check_DontinhScaling" Checked="Checked_DontinhScaling" Unchecked="Checked_DontinhScaling"/>
                            </StackPanel>

                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                            <Button Cursor="Hand"  Name="ButtonEditTranslations" Click="editnodetranslations" Margin="5,0,5,0" Width="110">Translations</Button>
                            <Button Cursor="Hand"  Name="ButtonEditRotations" Click="editnoderotations" Margin="5,0,5,0" Width="90">Rotations</Button>
                            <Button Cursor="Hand"  Name="ButtonEditScalings" Click="editnodescalings" Margin="5,0,5,0" Width="90">Scalings</Button>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Name="InfoPivotPointNode" Width="200"/>
                            <Button Cursor="Hand"  Click="SetPivotPoint" Width="50" Margin="5,0,5,0">Set...</Button>
                        </StackPanel>
                        <Button Cursor="Hand"  Click="EditNodeData">Edit data</Button>
                        <TextBox Height="80" Name="Report_Node_data" IsReadOnly="True" Background="LightGray" AcceptsReturn="True" 
    TextWrapping="Wrap" />
                    </StackPanel>

                    <ScrollViewer   Grid.Row="2" Grid.Column="1">

                        <StackPanel>


                            <Button Cursor="Hand"  Click="createnode_click" >Create...</Button>
                            <Button Cursor="Hand"   Content="Presets..." Visibility="Collapsed" >

                                <Button.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Item Pixies" Click="createpixies" Background="LightGray"/>
                                        <MenuItem Header="Dust" Click="createdust" Background="LightGray"/>
                                        <MenuItem Header="Smoke" Click="createsmoke" Background="LightGray"/>
                                    </ContextMenu>
                                </Button.ContextMenu>
                            </Button>

                            <Button Cursor="Hand"  Click="RenameNode">Rename</Button>
                            <Button Cursor="Hand"  Click="findnode">Find by name...</Button>



                            <Button Cursor="Hand"  Click="ViewNodeTransformations">View Transformations</Button>
                            <Button Cursor="Hand"  Click="DelNode">Delete</Button>
                            <Button Cursor="Hand"  Click="DelBonesGeometry">Delete all geometry attached to this bone</Button>

                            <Button Cursor="Hand"  Click="Setpiv">Set Pivot Point to Geoset's centroid...</Button>
                            <Button Cursor="Hand"  Click="movetoroot">Move to root</Button>
                            <Button Cursor="Hand"  Click="movetargetnodeundernode">Move under node...</Button>
                            <Button Cursor="Hand"  Click="duplicatenode">Duplicate</Button>
                            <Button Cursor="Hand"  Click="rootall">Root all nodes</Button>
                            <Button Cursor="Hand"  Click="removesequencesfromnodetransfromations">Remove sequenes from keyframes...</Button>
                            <Button Cursor="Hand"  Click="resetkeyframes">Reset all keyframes to default</Button>
                            <Button Cursor="Hand"  Click="clearnodeTrans">Clear transformations...</Button>
                            <Button Cursor="Hand"  Click="reversenodetr">Reverse Transformations...</Button>
                            <Button Cursor="Hand"  Click="SpaceTras" ToolTip="Makes the distance between keyframes equal"  >Space Transformations...</Button>
                            <Button Cursor="Hand"  Click="clearAllnodetrans">Clear all nodes of transformations</Button>


                            <Button Cursor="Hand"  Click="CreateAtts1">Create all building/mechanical attachment points</Button>
                            <Button Cursor="Hand"  Click="Createatts2">Create all unit attachment points</Button>
                            <Button Cursor="Hand"  Click="copyNodeTranslations">Copy node transformations</Button>
                            <Button Cursor="Hand"  Click="pastenodetranslations">paste node transformations</Button>
                            <Button Cursor="Hand"  Click="NegateNodePositon">negate node position</Button>
                            <Button Cursor="Hand"  Click="Tranlateallnodes">Translate all nodes by....</Button>
                            <Button Cursor="Hand"  Click="alignnodes">Align nodes by....</Button>

                            <Button Cursor="Hand"  Click="CenterAllNodes">center all nodes by....</Button>
                            <Button Cursor="Hand"   Click="RotateAllNodesCollectively">Rotate all nodes collectively....</Button>
                            <Button Cursor="Hand"    Click="scalenodes">Scale all nodes collectively....</Button>
                            <Button Cursor="Hand"    Click="geosetInfobone">Which geosets are attached to this bone?</Button>
                            <Button Cursor="Hand"   Click="reversenodekeyframesrotations">Reverse rotations of this node's rotations...</Button>
                            <Button Cursor="Hand"    Click="shiftnodetranslations">Shift translations of this node...</Button>
                            <Button Cursor="Hand"    Click="scalekeyframesofnode">shrink/inflate scalings of this node...</Button>

                        </StackPanel>
                    </ScrollViewer>

                </Grid>

            </TabItem>
            <TabItem Header="Textures" Background="LightGray">
                <Grid Background="LightGray">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <!-- Materials Section -->
                    <Grid Grid.Row="0" Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Name="Label_Materials" Text="Materials" Background="LightGray" VerticalAlignment="Top" />
                        <ListBox Name="List_MAterials" Grid.Row="1" SelectionMode="Single"
                     SelectionChanged="List_MAterials_SelectionChanged"    Background="LightGray"  
                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                    </Grid>
                    <StackPanel Grid.Row="0" Grid.Column="1" Margin="10">
                        <CheckBox Name="Check_MatFS" Content="Full Resolution" Checked="Checked_MatFullRes" Unchecked="Checked_MatFullRes" />
                        <CheckBox Name="Check_MatSort" Content="Sort Primitives Far Z" Checked="Checked_MatSort" Unchecked="Checked_MatSort" />
                        <CheckBox Name="Check_MatSort2" Content="Sort Primitives Near Z" Checked="Checked_MatSort2" Unchecked="Checked_MatSort2" />
                        <CheckBox Name="Check_MatCC" Content="Constant Color" Checked="Checked_MatCC" Unchecked="Checked_MatCC" />
                        <Button Cursor="Hand"  Click="CreateMAterial" Content="New" Margin="5,0,5,0" />
                        <Button Cursor="Hand"  Click="DelMAterial" Content="Delete" Margin="5,0,5,0"  />
                    </StackPanel>

                    <!-- Layers Section -->
                    <Grid Grid.Row="1" Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Name="Label_Layers" Text="Layers" Background="LightGray" VerticalAlignment="Top" />
                        <ListBox Name="List_Layers" Grid.Row="1" SelectionMode="Single"   Background="LightGray"  
                     SelectionChanged="SelectedLayer"
                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
                            <ListBox.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Header="Move up" Click="movelayerup"/>
                                    <MenuItem Header="Move down" Click="movelayerdown"/>
                                    <MenuItem Header="Create new" Click="createnewlayer"/>
                                </ContextMenu>
                            </ListBox.ContextMenu>
                        </ListBox>
                    </Grid>
                    <ScrollViewer Grid.Row="1" Grid.Column="1">
                        <StackPanel Margin="5">
                            <CheckBox Name="Check_Unshaded" Content="Unshaded" Checked="Checked_Unshaded" Unchecked="Checked_Unshaded" />
                            <CheckBox Name="Check_Unfogged" Content="Unfogged" Checked="Checked_Unfogged" Unchecked="Checked_Unfogged" />
                            <CheckBox Name="Check_twosided" Content="Twosided" Checked="Checked_twosided" Unchecked="Checked_twosided" />
                            <CheckBox Name="Check_sf" Content="Sphere Env Map" Checked="Checked_sf" Unchecked="Checked_sf" />
                            <CheckBox Name="Check_NoDepthTest" Content="No Depth Test" Checked="Checked_NoDepthTest" Unchecked="Checked_NoDepthTest" />
                            <CheckBox Name="Check_NoDepthSet" Content="No Depth Set" Checked="Checked_NoDepthSet" Unchecked="Checked_NoDepthSet" />
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Filter mode" Width="80"/>
                                <ComboBox Name="Combo_FilterModeLayer" Width="150" SelectionChanged="SetLayerFilterMode">
                                    <ComboBox.Items>
                                        <ComboBoxItem>None</ComboBoxItem>
                                        <ComboBoxItem>Transparent</ComboBoxItem>
                                        <ComboBoxItem>Blend</ComboBoxItem>
                                        <ComboBoxItem>Additive</ComboBoxItem>
                                        <ComboBoxItem>AdditiveAlpha</ComboBoxItem>
                                        <ComboBoxItem>Modulate</ComboBoxItem>
                                        <ComboBoxItem>Modulate2x</ComboBoxItem>


                                    </ComboBox.Items>
                                </ComboBox>

                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Using Texture"  Width="80"/>
                                <ComboBox Name="Combo_LayerUsedTexture" Width="150" SelectionChanged="SetUsedLayerTexture"/>

                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Using Texture animation" Width="140"/>
                                <ComboBox Name="Combo_LayerUsedTextureAnim" Width="150"
                                          SelectionChanged="SetUsedLayerTextureAnim"/>

                            </StackPanel>

                            <Button Cursor="Hand"  Click="DelLayer" Content="Delete" />
                            <Button Cursor="Hand"  Click="viewLayerTransformations" Content="View Transformations" />
                            <Button Cursor="Hand"  Click="editlayeralpha" Content="edit alpha" />
                            <Button Cursor="Hand"  Click="editlayertextureid" Content="edit textuerid" />

                        </StackPanel>
                    </ScrollViewer>

                    <!-- Textures Section -->
                    <Grid Grid.Row="2" Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Name="LabelTextues" Text="Textures" />
                        <ListBox Name="List_Textures" Grid.Row="1" SelectionMode="Single"   Background="LightGray"  
                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch" SelectionChanged="SelectedTexture" />
                    </Grid>
                    <ScrollViewer  Grid.Row="2" Grid.Column="1" Margin="3">


                        <StackPanel>
                            <Button Cursor="Hand"  Click="findTexture" Content="Find texture..." />
                            <Button Cursor="Hand"  Click="createTextures" Content="Mass create textures from paths..." />
                            <Button Cursor="Hand"  Click="delTexture" Content="Delete" />
                            <Button Cursor="Hand"  Click="creatematerialfortargettexture" Content="Create material for this texture" />
                            <Button Cursor="Hand"  Click="creatematsforalltextures" Content="Create materials for all textures" />
                            <Button Cursor="Hand"  Click="createTC" Content="Create Team color" />
                            <Button Cursor="Hand"  Click="createTG" Content="Create Team glow" />
                            <CheckBox Name="Check_WW" Content="Wrap Width"  Checked="Checked_WW" Unchecked="Checked_WW"/>
                            <CheckBox Name="Check_WH" Content="Wrap Height"  Checked="Checked_WH" Unchecked="Checked_WH"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Texture Animations Section -->
                    <Grid Grid.Row="3" Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Name="LabelTextueAnims" Text="Texture Animations" />
                        <ListBox Name="List_TextureAnims"   Background="LightGray"   Grid.Row="1" SelectionMode="Single"
                     HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                    </Grid>
                    <StackPanel Grid.Row="3" Grid.Column="1">
                        <Button Cursor="Hand"  Click="createta" Content="Create" />
                        <Button Cursor="Hand"  Click="viewTextureAnims" Content="View transformations" />
                        <Button Cursor="Hand"  Click="ta_edit_tr" Content="edit translation" />
                        <Button Cursor="Hand"  Click="ta_edit_ro" Content="edit rotation" />
                        <Button Cursor="Hand"  Click="ta_edit_scaling" Content="edit scaling" />
                        <Button Cursor="Hand"  Click="DeleteTextureAnim" Content="Delete" />
                    </StackPanel>
                </Grid>
            </TabItem>

            <TabItem Header="Inspector" HorizontalAlignment="Right"  Background="LightGray" Margin="0,-2,-2,0" Width="65">
                <TabControl Name="TC_Inspector" SelectionChanged="ChangedInspector">
                    <TabItem Header="Info">
                        <Grid Background="LightGray">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <ScrollViewer Grid.Column="0"  >
                                <TextBlock Name="LabelDisplayInfo" />
                            </ScrollViewer>
                            <StackPanel VerticalAlignment="Top" Grid.Column="1">
                                <Button Cursor="Hand"  Click="showunanimatedseq">Which sequences are not animated?</Button>
                                <Button Cursor="Hand"  Click="CopySQData">Copy sequences data for keyframes</Button>
                                <Button Cursor="Hand"  Click="ShowGaps">show me sequence gaps up to 999,999</Button>

                            </StackPanel>

                        </Grid>
                    </TabItem>
                    <TabItem Header="Check for errors">
                        <TextBox Name="Box_Errors" Background="LightGray"  VerticalScrollBarVisibility="Visible"/>
                    </TabItem>
                </TabControl>


            </TabItem>



        </TabControl>
    </Grid>
</Window>
